# Crypto

Table des matières

* [Présentation des cryptomonnaies](#crypto)	

* [Présentation d’un wallet](#presentation)

* [Création d’un wallet](#creation)

* [Menaces potentielles](#menace)

* [Sécurisation des applications](#securisation)

* [Fourre tout](#ft)
	
* [Lexique](#lexique)
	
* [Index](#index)	

<div id='crypto'/>

## Présentation des cryptomonnaies 

Qu’est-ce qu’une cryptomonnaie ? 
Les cryptomonnaies sont des monnaies dématérialisées c’est-à-dire qu’elles n’ont pas de support physique dont le fonctionnement est décentralisé c’est-à-dire qu’il n’y a personne derrière pour l’émettre, la réguler ou encore la contrôler et surtout, il n’y a pas d’intermédiaires pour assurer les transactions. De plus, cela fonctionne en peer-to-peer c’est-à-dire que chaque ordinateur est à la fois un client mais aussi un serveur. Et chaque transaction repose sur des algorithmes cryptographiques.
De plus, le nombre d’unités en circulation et la masse monétaire maximale sont définis à l’avance.
Néanmoins, ces monnaies ne peuvent pas apparaitre seuls. Des gens appelés donc mineur mettent à jour le registre de la monnaie en produisant de nouveaux blocs d’informations qui s’ajoutent à la chaine des blocs précédentes transactions. Quand deux personnes effectuent une transaction, elles envoient un message a tout le monde afin de prévenir qu’une transaction a eu lieu Le premier mineur à créer le prochain bloc de transactions dans la chaine reçoit une compensation financière en contrepartie de cette tâche. 

Le système de cryptage qu’utilise les cryptos possède une composante aléatoire et donc rend la monnaie difficile voire impossible à corrompre. Ce qui fait qu’il est très compliqué même pour un mineur d’introduire des informations frauduleuses. 
La valeur des cryptos ne sont déterminées que par la loi de l’offre et de la demande. 
Vocabulaire 
Blockchain

La bockchain correspond à ces blocs créer de manière régulière par les mineurs. Chacun de ces blocs possède donc un certain nombre de transaction ce qui veut dire que l’ensemble des blocs peut donc permettre de déterminer le solde de chaque compte. (Ce qui pourrait s’apparenter à un livre de compte classique). Mais contrairement aux monnaies classiques, les cryptos monnaies ne quittent jamais cette blockchain ce qui veut dire que lorsqu’on achète une crypto monnaie, elles sont justes attribué sur la blockchain a votre portefeuille. Ce qui veut aussi dire qu’en théorie il est possible d’envoyer de l’argent a un wallet imaginaire ou encore à un wallet ‘offline’
Nœuds 

Un nœud est un ordinateur qui possède une copie de la blockchain. Tous les nœuds sont reliés entre eux et forment un réseau. Certains de ces nœuds sont des mineurs dont le rôle est de vérifier la validité des transactions et que rien ne soit falsifié. Lorsqu’un bloc est validé par tous les mineurs, ils l’ajoutent a la blockchain. 
Smart contracts 

Un contrat traditionnel est une convention par laquelle une ou plusieurs personnes, physiques ou morales, s’engagent à donner, à faire ou à ne pas faire quelque chose vis à vis de quelqu’un. Juridiquement, un contrat est formé dès lors qu’une offre rencontre une acceptation.
Traditionnellement, cette rencontre se fait de façon formelle ou informelle, par la rencontre des contractants ou leur mise en relation. Il convient donc de rédiger par écrit le contrat pour en officialiser les termes et garantir les obligations des cocontractants sur le plan juridique.
Le smart contract reprend l’ensemble de ces notions du contrat mais résulte d’un programme informatique inscrit dans une blockchain au même titre que les cryptomonnaies.
(La blockchain peut contenir d’autres informations que des transactions. En effet, il peut y avoir des lignes de codes, des contracts et des algorithmes en détaillant leurs conditions de déclenchement.)
Token
C’est l’unité d’échange. L’éther est le token de la blockchain Ethereum 
Fork




<div id='presentation'/>

## Présentation d’un wallet 

Qu’est-ce qu’un wallet ?
C’est un portefeuille virtuel qui stocke de manière sécurisée les informations bancaires. Elle peut donc contenir des monnaies tel que des euros ou encore des dollars mais aussi des cryptomonnaies. 

Il en existe trois types : 
-	 __Online wallet__ : les plus simples et accessibles d’utilisations. Car accessible 24h/24 et n’ont pas besoin de téléchargement. Mais la gestion de vos cryptos se fait par un tier et est dépendant de celui-ci (ils sont donc les propriétaires légales de ces cryptos monnaies). En général les grandes plateformes d’exchange sont aussi des online wallet. 
-	__Desktop/mobile wallet__ :  permet de stocker la clé privée depuis un appareil qui nous appartient. Ce qui permet d’avoir un contrôle total sur nos cryptos. Mais cela peut être dangereux en cas d’attaque informatique. Il est aussi très important de mettre son wallet régulièrement à jour son wallet. Il existe donc deux types de ce genre de wallet : des wallets lourds et des wallets légers. Les premiers vont télécharger l’intégralité de la blockchain tandis que l’autre télécharge qu’une partie de la blockchain pour vérifier son intégralité
-	__Cold wallet__ :  le portefeuille le plus sécurisé car pas relié à internet. Il en existe deux types :  le premier est le paper wallet c’est un wallet qui consiste à marquer les clés public et privés sur une feuille que l’on garde précieusement. Mais celui-ci ne permet pas de faire de l’exchange donc il faudra donc partager la clé privée avec un autre wallet et donc cela créer une vulnérabilité au wallet. L’autre type est le Hardware wallet. C’est celui qui demande le plus d’investissement car il faut acheter le support matériel. Mais ce wallet permet de protéger les clés dans des coffres fort numériques qui encrypte les différentes clés. Les cryptos sont par ailleurs stockés dans une seed phase qui peut être demander de noter. Ainsi, on aura toujours l’occasions de retrouver nos fonds et ça quel que soit l’appareil.  
Mais un wallet peut aussi contenir d’autres choses que de l’argent tel que des places de concerts ou encore un pass sanitaire.
Comment ça fonctionne ?

Pour communiquer avec des sites marchands, les wallet de monnaies classiques utilisent des logiciels afin de communiquer les informations bancaires. 
Pour les cryptos monnaies, c’est un peu différent. Le wallet n’a pas accès directement à nos cryptos mais possède des outils pour pouvoir y accéder. 
Wallet pour crypto monnaie 

Un wallet possède au moins deux choses :
-	__Une adresse publique__ 
-	__Une adresse privée__











La première a pour but de recevoir de l’argent et donc la partager n’est pas si grave tandis que la seconde ne doit pas être partager puisqu’elle a pour but d’envoyer des cryptos.

<div id='creation'/>

## Création d’un wallet

` test `









<div id='menace'/>

## Menaces potentielles

Phishing 
C’est une technique qui consiste à se faire passer pour un tier de confiance afin de récupérer des informations confidentielles. 
Pour lutter contre ça, on a pensé à faire de la double authentifications (en envoyant un mail contenant un code à copier) comme on peut le voir dans beaucoup 
Logiciels malveillants (Ou rançongiciel) c’est un logiciel qui va chercher à récupérer des droits ou des informations confidentiels. S’il récupère trop de droit, il peut rendre le des fichiers ou des logiciels inaccessibles et demander une rançon pour tout récupérer.
Pour le moment on n’a pas trouvé de solutions car le problème ne se situe pas au niveau du logiciel mais plutôt de comment un utilisateur utilise son appareil. Mais pour empêcher un logiciel d’ouvrir l’application après que l’utilisateur c’est identifié une première fois, on peut obliger l’utilisateur à se reconnecter à chaque nouvelle utilisation du logiciel. 
Injection de code 
Consiste à rentrer des commandes dans les endroits ou l’utilisateur peut interagir avec le programme. Si l’application n’est pas protégée, cela peut être une porte d’entrée afin de récupérer des bases de données par exemple. 
Pour contrer cela, on peut vérifier que l’utilisateur ne rentre pas de commande. 
Vol de portefeuilles 
Le principe de vol de portefeuille fonctionne surtout dans le changement d'adresse vers une controlée par l'attaquant, les deux cas vu lors de notre recherche est le cas d'un scan de différents ports ou du presse papiers. Le virus fonvtionnait en attendant qu'une chaîne ressemblant à une adresse de portefeuille de cryptomonnaie soit placée dans le Presse-papiers et la remplacaient alors par une adresse contrôlée par le cybercriminel. Nous avons aussi le cas d'un CSFR qui afonctionné sur plusieurs plateformes Pour ce danger, il existe des solutions mais celle ci sont encore un peu complexe pour les comprendre. https://blog.netlab.360.com/warning-satori-a-new-mirai-variant-is-spreading-in-worm-style-on-port-37215-and-52869-en/ http://blog.netlab.360.com/art-of-steal-satori-variant-is-robbing-eth-bitcoin-by-replacing-wallet-address-en/

Attaques par dictionnaire  
L'attaque par dictionnaire est une méthode utilisée en cryptanalyse pour trouver un mot de passe ou une clé. Elle consiste à tester une série de mots de passe potentiels, les uns à la suite des autres, en espérant que le mot de passe utilisé pour le chiffrement soit contenu dans le dictionnaire.
Bloquer au bout de 3 tentatives ou temporiser entre chaque tentative, moins efficace mais demander à la création un mot de passe compliqué.

<div id='securisation'/>

# Sécurisation des applications


La sécurisation d’une application ou d’un système s’attache aux 6 aspects suivants :

###### L’authentification

Lier (de manière discriminante) une identité à une entité donnée d’un système
*	Dé personnification : Comment s’assure-t-on que la personne est bien celle qu’elle prétend être
*	Rejeu : Comment lutter contre la capture des mots de passe
*	Rebond : Comment lutter contre la capture des mots de passe sur une autre application
*	Altération : Comment s’assure-t-on ne s’approprie pas une signature illégalement
*	Transférabilité : Comment lutter contre l’échange de mot de passe

###### Le contrôle d’accès

Lier une ressource (base de données) avec les droits d’accès et une entité
Rôle : administrateur, éditeur, utilisateur

###### L’intégrité 

Prévenir l’altération volontaire ou accidentelle d’une donnée ou des services

###### La confidentialité

La confidentialité des données lors d’échanges, garantir que des données acquises illégalement soient inutilisables

###### La non-répudiation

S’assurer que l’envoi et la réception d’un message sont incontestables, personne ne doit nier son implication en cas de litige (certificat)
La protection contre l’analyse du trafic
L’utilisation des protocoles SSL (Secure Socket Layer) et TLS (Transport Layer Security) dans les échanges sur le Web (https)

__Sécurisation des communications avec TLS__

3 fonctions majeures :
	Confidentialité : algorithme de chiffrements symétriques (AES 256, RC4, DES, Blow Fish) et asymétrique (RSA,DSA, Diifie Helmann) 
	Intégrité : Signature des données (HMAC, MD,RIPEMD, SHA-1)
	Authentification : Certificat X.509
__Mettre en place un mécanisme d’authentification__

3 manières de stocker les mots de passe
	En clair
	Signature du mot de passe :Signature calculée grâce à une fonction de hachage (Md5)
Problème : Même mot de passe pour différents sites ou force brute de type dictionnaire
	Stocker le mot de passe avec un sel : longue chaine de caractères spécifiques à un utilisateur
Lors de l’authentification, l'utilisateur soumet son mot de passe en clair et l’application calcule la signature avec le sel. Si le calcul de cette nouvelle signature correspond à la signature stockée, alors le mot de passe entré par l'utilisateur est le bon.
Problème : Force brute (stratégie d’attaque basées sur des fréquences bien plus élevées que les algorithmes de chiffrement ne peuvent pas atteindre)
Bonne pratique :
Utiliser une fonction de hachage spécifique avec plusieurs itérations de calculs (bcrypt)
Biométrie de l’utilisateur (empreinte, face id)
Authentification multifactorielle (SMS)

__Contrôler l’accès à nos applications__

Le moindre privilège : Une tâche ne doit bénéficier que des privilèges strictement nécessaires à l’exécution du code menant à bien ses fonctionnalités
La bibliothèque Oauth 2.0
4 rôles : Le détenteur, le serveur de ressources, le client, le serveur d’autorisation

__Gérer les sessions__

Surtout sur le web
__Manipuler les données non fiables__

Injection SQL …
Coté serveur et client

__Protection des données et des bases de données__

Protocole TLS pour le chiffrement des communications
Pour les bases de données :

Accès mal sécurisé

*	Chiffrer les paramètres
*	Gérer les privilèges
*	Protéger les accès (authentification multi facteur)

Données non fiables

*	Requêtes paramétrées
*	Variables fortement typées
*	Echappement des entrées

Pendant l’exploitation

*	Installer les correctifs
*	Limiter les fonctionnalités
*	Historiser les transactions

 __Sécuriser les erreurs des logs__

Traiter les erreurs
*	Limiter les informations divulguées
*	Journaliser les évènements
	*	Statistiques d’utilisation
	*	Détection des bugs
	*	Retour sur une panne


#### Pour ce qui est de la sécurité sur les applications Android

Le projet de sécurité mobile de l'OWASP est une ressource centralisée destinée à donner aux développeurs et aux équipes de sécurité les ressources dont ils ont besoin pour créer et maintenir des applications mobiles sécurisées. L’objectif est de classer les risques de sécurité mobile et de fournir des contrôles de développement pour réduire leur impact ou leur probabilité d'exploitation. 

__Mobile App Security Requirements and Verification__

Plusieurs niveaux de validation

MASVS L2+R 

« Industrie Financière : Applications de banque en ligne permettant aux utilisateurs de transférer des fonds et où les techniques d’injection de code et d’instrumentation sur des appareils mobiles compromis entraînent un risque. Dans ce cas, les contrôles du MASVS-R peuvent être mis en oeuvre pour empêcher la manipulation et rendre la vie des créateurs de logiciels malveillants (malwares) plus compliquée. »


1.	Exigences Concernant l’Architecture, le Design et le Modèle de Menaces
2.	Exigences Concernant le Stockage des Données et le Respect de la Vie Privée
3.	Exigences Concernant la Cryptographie
4.	Exigences Concernant l’Authentification et la Gestion des Sessions
5.	Exigences Concernant la Communication Réseau
6.	Exigences Concernant les Interactions avec la Plateforme
7.	Exigences Concernant la Qualité du Code et les Paramètres de Génération
8.	Exigences Concernant la Résilience

__Mobile App Security Checklist__

Une checklist des vulnérabilités d’une application

https://github.com/OWASP/owasp-mstg/releases/tag/v1.4.0

Top 10 Mobile Risks - Final List 2016
* M1: Improper Platform Usage
* M2: Insecure Data Storage
* M3: Insecure Communication
* M4: Insecure Authentication
* M5: Insufficient Cryptography
* M6: Insecure Authorization
* M7: Client Code Quality
* M8: Code Tampering
* M9: Reverse Engineering
* M10: Extraneous Functionality

#### Documentation :

__L’attaque par recouvrement__

https://www.silicon.fr/android-faille-redoutable-attaque-recouvrement-183857.html

La faille permet de mener des attaques dites « overlay » où une fausse page s’affiche sur l’écran en lieu et place de l’affichage légitime pour tromper l’utilisateur et le pousser à installer des malwares à son insu.

Par exemple, une application invite l’utilisateur à « Continuer » pour appliquer une mise à jour alors qu’elle cache en fait l’installation du malware Porn Droid, comme le montre les captures d’écran ci-contre.



----------------

<div id='ft'/>

## Fourre tout 

<div id='lexique'/>

## Lexique

Fork 
seed phrase

<div id='index'/>

## Index 
https://n26.com/fr-fr/wallet <br>
https://cryptoast.fr/comment-securiser-et-stocker-crypto-monnaies/ <br>
https://vallbanc.com/fr/crypto-monnaies-blockchain-et-decentralisation-du-systeme-bancaire <br>

Le site de l’owasp mobile project : https://owasp.org/www-project-mobile-security-testing-guide/

https://openclassrooms.com/fr/courses/1757741-securisez-vos-donnees-avec-la-cryptographie <br>
https://www.ssi.gouv.fr/administration/guide/recommandations-de-securite-relatives-a-tls/ <br>
https://www.ssi.gouv.fr/uploads/2017/12/guide_cloisonnement_systeme_anssi_pg_040_v1.pdf <br>




Exemple wallet Android 
https://github.com/Blockstream/green_android
